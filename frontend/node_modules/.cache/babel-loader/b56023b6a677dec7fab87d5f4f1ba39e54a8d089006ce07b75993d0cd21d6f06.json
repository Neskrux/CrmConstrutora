{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bruno\\\\Downloads\\\\CrmConstrutora\\\\frontend\\\\src\\\\components\\\\Fechamentos.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Fechamentos = () => {\n  _s();\n  const {\n    makeRequest,\n    isAdmin\n  } = useAuth();\n  const [fechamentos, setFechamentos] = useState([]);\n  const [clientes, setClientes] = useState([]);\n  const [consultores, setConsultores] = useState([]);\n  const [imobiliarias, setClinicas] = useState([]);\n  const [agendamentos, setAgendamentos] = useState([]);\n  const [erro, setErro] = useState(null);\n  const [carregando, setCarregando] = useState(true);\n  const [filtroConsultor, setFiltroConsultor] = useState('');\n  const [filtroClinica, setFiltroClinica] = useState('');\n  const [filtroMes, setFiltroMes] = useState('');\n  const [filtrosVisiveis, setFiltrosVisiveis] = useState(false);\n  const [modalAberto, setModalAberto] = useState(false);\n  const [fechamentoEditando, setFechamentoEditando] = useState(null);\n  const [ordenacao, setOrdenacao] = useState('data-desc'); // Novo estado para ordenação\n  const [novoFechamento, setNovoFechamento] = useState({\n    cliente_id: '',\n    consultor_id: '',\n    imobiliaria_id: '',\n    valor_fechado: '',\n    valor_formatado: '',\n    data_fechamento: new Date().toISOString().split('T')[0],\n    tipo_servico: '',\n    observacoes: ''\n  });\n  const [contratoSelecionado, setContratoSelecionado] = useState(null);\n  const [salvando, setSalvando] = useState(false);\n  useEffect(() => {\n    carregarDados();\n  }, []);\n  const carregarDados = async () => {\n    try {\n      setCarregando(true);\n      setErro(null);\n      const [fechamentosRes, clientesRes, consultoresRes, imobiliariasRes, agendamentosRes] = await Promise.all([makeRequest('/fechamentos'), makeRequest('/clientes'), makeRequest('/consultores'), makeRequest('/imobiliarias'), makeRequest('/agendamentos')]);\n      if (!fechamentosRes.ok) {\n        throw new Error(`Erro ao carregar fechamentos: ${fechamentosRes.status} - Tabela 'fechamentos' não encontrada. Execute a migração no Supabase.`);\n      }\n      const fechamentosData = await fechamentosRes.json();\n      const clientesData = await clientesRes.json();\n      const consultoresData = await consultoresRes.json();\n      const imobiliariasData = await imobiliariasRes.json();\n      const agendamentosData = await agendamentosRes.json();\n      setFechamentos(Array.isArray(fechamentosData) ? fechamentosData : []);\n      setClientes(Array.isArray(clientesData) ? clientesData : []);\n      setConsultores(Array.isArray(consultoresData) ? consultoresData : []);\n      setClinicas(Array.isArray(imobiliariasData) ? imobiliariasData : []);\n      setAgendamentos(Array.isArray(agendamentosData) ? agendamentosData : []);\n      setCarregando(false);\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n      setErro(error.message);\n      setCarregando(false);\n      setFechamentos([]);\n      setClientes([]);\n      setConsultores([]);\n      setClinicas([]);\n      setAgendamentos([]);\n    }\n  };\n  const filtrarFechamentos = () => {\n    if (!Array.isArray(fechamentos)) {\n      return [];\n    }\n    return fechamentos.filter(fechamento => {\n      const consultorMatch = !filtroConsultor || fechamento.consultor_id === parseInt(filtroConsultor);\n      const imobiliariaMatch = !filtroClinica || fechamento.imobiliaria_id === parseInt(filtroClinica);\n      let mesMatch = true;\n      if (filtroMes) {\n        const dataFechamento = new Date(fechamento.data_fechamento);\n        const [ano, mes] = filtroMes.split('-');\n        mesMatch = dataFechamento.getFullYear() === parseInt(ano) && dataFechamento.getMonth() === parseInt(mes) - 1;\n      }\n      return consultorMatch && imobiliariaMatch && mesMatch;\n    });\n  };\n  const ordenarFechamentos = fechamentosFiltrados => {\n    const fechamentosOrdenados = [...fechamentosFiltrados];\n    switch (ordenacao) {\n      case 'credito-desc':\n        return fechamentosOrdenados.sort((a, b) => parseFloat(b.valor_fechado || 0) - parseFloat(a.valor_fechado || 0));\n      case 'credito-asc':\n        return fechamentosOrdenados.sort((a, b) => parseFloat(a.valor_fechado || 0) - parseFloat(b.valor_fechado || 0));\n      case 'data-desc':\n        return fechamentosOrdenados.sort((a, b) => new Date(b.data_fechamento) - new Date(a.data_fechamento));\n      case 'data-asc':\n        return fechamentosOrdenados.sort((a, b) => new Date(a.data_fechamento) - new Date(b.data_fechamento));\n      case 'cliente':\n        return fechamentosOrdenados.sort((a, b) => {\n          var _clientes$find, _clientes$find2;\n          const clienteA = ((_clientes$find = clientes.find(c => c.id === a.cliente_id)) === null || _clientes$find === void 0 ? void 0 : _clientes$find.nome) || '';\n          const clienteB = ((_clientes$find2 = clientes.find(c => c.id === b.cliente_id)) === null || _clientes$find2 === void 0 ? void 0 : _clientes$find2.nome) || '';\n          return clienteA.localeCompare(clienteB);\n        });\n      default:\n        return fechamentosOrdenados;\n    }\n  };\n  const calcularEstatisticas = () => {\n    const fechamentosFiltrados = filtrarFechamentos();\n    // Considerar apenas fechamentos aprovados para estatísticas\n    const fechamentosAprovados = fechamentosFiltrados.filter(f => f.aprovado === 'aprovado');\n    const total = fechamentosAprovados.length;\n    const valorTotal = fechamentosAprovados.reduce((acc, f) => acc + parseFloat(f.valor_fechado || 0), 0);\n    const ticketMedio = total > 0 ? valorTotal / total : 0;\n    const hoje = new Date().toISOString().split('T')[0];\n    const fechamentosHoje = fechamentosAprovados.filter(f => f.data_fechamento === hoje).length;\n    const mesAtual = new Date();\n    const fechamentosMes = fechamentosAprovados.filter(f => {\n      const dataFechamento = new Date(f.data_fechamento);\n      return dataFechamento.getMonth() === mesAtual.getMonth() && dataFechamento.getFullYear() === mesAtual.getFullYear();\n    }).length;\n    return {\n      total,\n      valorTotal,\n      ticketMedio,\n      fechamentosHoje,\n      fechamentosMes\n    };\n  };\n  const contarFiltrosAtivos = () => {\n    let count = 0;\n    if (filtroConsultor) count++;\n    if (filtroClinica) count++;\n    if (filtroMes) count++;\n    return count;\n  };\n  const limparFiltros = () => {\n    setFiltroConsultor('');\n    setFiltroClinica('');\n    setFiltroMes('');\n  };\n  const abrirModal = (fechamento = null) => {\n    if (fechamento) {\n      setFechamentoEditando(fechamento);\n      const valorFormatado = fechamento.valor_fechado ? parseFloat(fechamento.valor_fechado).toLocaleString('pt-BR', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      }) : '';\n      setNovoFechamento({\n        ...fechamento,\n        valor_formatado: valorFormatado\n      });\n    } else {\n      setFechamentoEditando(null);\n      setNovoFechamento({\n        cliente_id: '',\n        consultor_id: '',\n        imobiliaria_id: '',\n        valor_fechado: '',\n        valor_formatado: '',\n        data_fechamento: new Date().toISOString().split('T')[0],\n        tipo_servico: '',\n        observacoes: ''\n      });\n    }\n    setModalAberto(true);\n  };\n  const fecharModal = () => {\n    setModalAberto(false);\n    setFechamentoEditando(null);\n    setContratoSelecionado(null);\n    setNovoFechamento({\n      cliente_id: '',\n      consultor_id: '',\n      imobiliaria_id: '',\n      valor_fechado: '',\n      valor_formatado: '',\n      data_fechamento: new Date().toISOString().split('T')[0],\n      tipo_servico: '',\n      observacoes: ''\n    });\n  };\n  const salvarFechamento = async () => {\n    setSalvando(true);\n    try {\n      const token = localStorage.getItem('token');\n      if (!token || token === 'null' || token.trim() === '') {\n        alert('Sua sessão expirou. Faça login novamente.');\n        window.location.href = '/login';\n        return;\n      }\n      if (!novoFechamento.cliente_id) {\n        alert('Por favor, selecione um cliente!');\n        return;\n      }\n      if (!novoFechamento.valor_fechado || parseFloat(novoFechamento.valor_fechado) <= 0) {\n        alert('Por favor, informe um valor válido!');\n        return;\n      }\n      if (!fechamentoEditando && !contratoSelecionado) {\n        alert('Por favor, selecione o contrato em PDF!');\n        return;\n      }\n      if (contratoSelecionado && contratoSelecionado.type !== 'application/pdf') {\n        alert('Apenas arquivos PDF são permitidos para o contrato!');\n        return;\n      }\n      if (contratoSelecionado && contratoSelecionado.size > 10 * 1024 * 1024) {\n        alert('O arquivo deve ter no máximo 10MB!');\n        return;\n      }\n      const formData = new FormData();\n      formData.append('cliente_id', parseInt(novoFechamento.cliente_id));\n      if (novoFechamento.consultor_id && novoFechamento.consultor_id.trim() !== '') {\n        formData.append('consultor_id', parseInt(novoFechamento.consultor_id));\n      }\n      if (novoFechamento.imobiliaria_id && novoFechamento.imobiliaria_id.trim() !== '') {\n        formData.append('imobiliaria_id', parseInt(novoFechamento.imobiliaria_id));\n      }\n      formData.append('valor_fechado', parseFloat(novoFechamento.valor_fechado));\n      formData.append('data_fechamento', novoFechamento.data_fechamento);\n      formData.append('tipo_servico', novoFechamento.tipo_servico || '');\n      formData.append('observacoes', novoFechamento.observacoes || '');\n      if (contratoSelecionado) {\n        formData.append('contrato', contratoSelecionado);\n      }\n\n      // Corrigir base da URL para evitar /api/api/fechamentos\n      const API_BASE_URL = process.env.NODE_ENV === 'production' ? '/api' : 'http://localhost:5000/api';\n      const url = fechamentoEditando ? `${API_BASE_URL}/fechamentos/${fechamentoEditando.id}` : `${API_BASE_URL}/fechamentos`;\n      console.log('🔐 Enviando requisição com token:', token ? 'presente' : 'ausente');\n      const response = await fetch(url, {\n        method: fechamentoEditando ? 'PUT' : 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n          // NÃO incluir 'Content-Type' ao usar FormData\n        },\n        body: formData\n      });\n      const result = await response.json();\n      if (response.ok) {\n        carregarDados();\n        fecharModal();\n        alert(fechamentoEditando ? 'Fechamento atualizado!' : `Fechamento registrado com sucesso! Contrato: ${result.contrato || 'anexado'}`);\n      } else {\n        console.error('Erro na resposta:', result);\n        alert('Erro: ' + (result.error || 'Erro desconhecido'));\n      }\n    } catch (error) {\n      console.error('Erro ao salvar fechamento:', error);\n      alert('Erro ao salvar: ' + error.message);\n    } finally {\n      setSalvando(false);\n    }\n  };\n  const excluirFechamento = async id => {\n    if (window.confirm('Deseja excluir este fechamento?')) {\n      try {\n        const response = await makeRequest(`/fechamentos/${id}`, {\n          method: 'DELETE'\n        });\n        if (response.ok) {\n          carregarDados();\n          alert('Fechamento excluído!');\n        } else {\n          const data = await response.json();\n          alert('Erro ao excluir: ' + (data.error || 'Erro desconhecido'));\n        }\n      } catch (error) {\n        console.error('Erro ao excluir fechamento:', error);\n        alert('Erro ao excluir: ' + error.message);\n      }\n    }\n  };\n\n  // Função para alterar status de aprovação\n  const alterarStatusAprovacao = async (fechamentoId, novoStatus) => {\n    try {\n      console.log(`Alterando status do fechamento ${fechamentoId} para ${novoStatus}`);\n      const endpoint = novoStatus === 'aprovado' ? 'aprovar' : 'reprovar';\n      const response = await makeRequest(`/fechamentos/${fechamentoId}/${endpoint}`, {\n        method: 'PUT'\n      });\n      console.log('Resposta da API:', response.status);\n      if (response.ok) {\n        const result = await response.json();\n        console.log('Sucesso:', result);\n        carregarDados();\n        alert(`Fechamento ${novoStatus === 'aprovado' ? 'aprovado' : 'reprovado'} com sucesso!`);\n      } else {\n        const error = await response.json();\n        console.error('Erro da API:', error);\n        alert('Erro ao alterar status: ' + (error.error || 'Erro desconhecido'));\n      }\n    } catch (error) {\n      console.error('Erro na requisição:', error);\n      alert('Erro de conexão: ' + error.message);\n    }\n  };\n  const formatarMoeda = valor => {\n    return new Intl.NumberFormat('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    }).format(valor);\n  };\n  const formatarData = data => {\n    return new Date(data + 'T00:00:00').toLocaleDateString('pt-BR');\n  };\n  const formatarValorInput = valor => {\n    const numeros = valor.replace(/\\D/g, '');\n    if (!numeros) return '';\n    const numero = parseFloat(numeros) / 100;\n    return numero.toLocaleString('pt-BR', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    });\n  };\n  const desformatarValor = valorFormatado => {\n    if (!valorFormatado) return '';\n    return valorFormatado.replace(/\\./g, '').replace(',', '.');\n  };\n  const handleValorChange = e => {\n    const valorDigitado = e.target.value;\n    const valorFormatado = formatarValorInput(valorDigitado);\n    const valorNumerico = desformatarValor(valorFormatado);\n    setNovoFechamento({\n      ...novoFechamento,\n      valor_fechado: valorNumerico,\n      valor_formatado: valorFormatado\n    });\n  };\n  const handleClienteChange = async clienteId => {\n    setNovoFechamento({\n      ...novoFechamento,\n      cliente_id: clienteId\n    });\n    if (clienteId) {\n      // Buscar o cliente selecionado\n      const cliente = clientes.find(p => p.id === parseInt(clienteId));\n      if (cliente && cliente.consultor_id) {\n        // Se o cliente tem consultor, selecionar automaticamente\n        setNovoFechamento(prev => ({\n          ...prev,\n          cliente_id: clienteId,\n          consultor_id: cliente.consultor_id.toString()\n        }));\n      }\n\n      // Buscar última visita do cliente para pegar a clínica\n      const ultimoAgendamento = agendamentos.filter(a => a.cliente_id === parseInt(clienteId)).sort((a, b) => new Date(b.data_agendamento) - new Date(a.data_agendamento))[0];\n      if (ultimoAgendamento && ultimoAgendamento.imobiliaria_id) {\n        setNovoFechamento(prev => ({\n          ...prev,\n          imobiliaria_id: ultimoAgendamento.imobiliaria_id.toString()\n        }));\n      }\n    }\n  };\n  const downloadContrato = async fechamento => {\n    try {\n      const API_BASE_URL = process.env.NODE_ENV === 'production' ? '' : 'http://localhost:5000/api';\n      const token = localStorage.getItem('token');\n      if (!token || token === 'null' || token.trim() === '') {\n        alert('Sua sessão expirou. Faça login novamente.');\n        window.location.href = '/login';\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/api/fechamentos/${fechamento.id}/contrato`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        const data = await response.json();\n        alert('Erro ao baixar contrato: ' + (data.error || 'Erro desconhecido'));\n        return;\n      }\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = fechamento.contrato_nome_original || 'contrato.pdf';\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    } catch (error) {\n      console.error('Erro ao baixar contrato:', error);\n      alert('Erro ao baixar contrato: ' + error.message);\n    }\n  };\n  if (carregando) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }, this);\n  }\n  if (erro) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 0.5rem 0',\n            fontSize: '1.125rem'\n          },\n          children: \"Erro ao carregar dados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0 0 1rem 0'\n          },\n          children: erro\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: carregarDados,\n          children: \"Tentar Novamente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this);\n  }\n  const fechamentosFiltrados = ordenarFechamentos(filtrarFechamentos());\n  const stats = calcularEstatisticas();\n  const filtrosAtivos = contarFiltrosAtivos();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"page-title\",\n        children: \"Gerenciar Fechamentos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"page-subtitle\",\n        children: \"Gerencie os fechamentos de vendas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-grid\",\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Total de Indica\\xE7\\xF5es\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-value\",\n          children: stats.total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Cr\\xE9dito Acumulado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-value\",\n          children: formatarMoeda(stats.valorTotal)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Ticket M\\xE9dio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-value\",\n          children: formatarMoeda(stats.ticketMedio)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Indica\\xE7\\xF5es Hoje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-value\",\n          children: stats.fechamentosHoje\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Indica\\xE7\\xF5es no M\\xEAs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-value\",\n          children: stats.fechamentosMes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"card-title\",\n            children: \"Lista de Fechamentos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.875rem',\n              color: '#6b7280',\n              marginTop: '0.25rem'\n            },\n            children: [\"Classificado por: \", ordenacao === 'data-desc' ? 'Data (Mais recente)' : ordenacao === 'data-asc' ? 'Data (Mais antigo)' : ordenacao === 'credito-desc' ? 'Crédito Acumulado (Maior)' : ordenacao === 'credito-asc' ? 'Crédito Acumulado (Menor)' : ordenacao === 'cliente' ? 'Cliente (A-Z)' : 'Padrão']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: () => setFiltrosVisiveis(!filtrosVisiveis),\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"16\",\n              height: \"16\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                points: \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 15\n            }, this), \"Filtros \", filtrosAtivos > 0 && `(${filtrosAtivos})`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: () => abrirModal(),\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"16\",\n              height: \"16\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"12\",\n                y1: \"5\",\n                x2: \"12\",\n                y2: \"19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"5\",\n                y1: \"12\",\n                x2: \"19\",\n                y2: \"12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 15\n            }, this), \"Novo Fechamento\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), filtrosVisiveis && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '1.5rem',\n          backgroundColor: '#f9fafb',\n          borderBottom: '1px solid #e5e7eb'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-4\",\n          style: {\n            gap: '1rem',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            style: {\n              margin: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Corretor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              value: filtroConsultor,\n              onChange: e => setFiltroConsultor(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Todos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 19\n              }, this), consultores.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c.id,\n                children: c.nome\n              }, c.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            style: {\n              margin: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Imobili\\xE1ria\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              value: filtroClinica,\n              onChange: e => setFiltroClinica(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Todas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 19\n              }, this), imobiliarias.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c.id,\n                children: c.nome\n              }, c.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            style: {\n              margin: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"M\\xEAs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"month\",\n              className: \"form-input\",\n              value: filtroMes,\n              onChange: e => setFiltroMes(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            style: {\n              margin: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Classificar por\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              value: ordenacao,\n              onChange: e => setOrdenacao(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"data-desc\",\n                children: \"Data (Mais recente)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"data-asc\",\n                children: \"Data (Mais antigo)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"credito-desc\",\n                children: \"Cr\\xE9dito Acumulado (Maior)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"credito-asc\",\n                children: \"Cr\\xE9dito Acumulado (Menor)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"cliente\",\n                children: \"Cliente (A-Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 13\n        }, this), filtrosAtivos > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-secondary\",\n          onClick: limparFiltros,\n          children: \"Limpar Filtros\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: fechamentosFiltrados.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '3rem',\n            color: '#6b7280'\n          },\n          children: \"Nenhum fechamento encontrado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Cliente\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 632,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Corretor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 633,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Imobili\\xE1ria\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Tipo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  style: {\n                    textAlign: 'right'\n                  },\n                  children: \"Valor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 636,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 637,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  style: {\n                    width: '180px'\n                  },\n                  children: \"A\\xE7\\xF5es\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: fechamentosFiltrados.map(fechamento => {\n                const cliente = clientes.find(p => p.id === fechamento.cliente_id);\n                const consultor = consultores.find(c => c.id === fechamento.consultor_id);\n                const imobiliaria = imobiliarias.find(c => c.id === fechamento.imobiliaria_id);\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: formatarData(fechamento.data_fechamento)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 649,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontWeight: '500'\n                        },\n                        children: (cliente === null || cliente === void 0 ? void 0 : cliente.nome) || 'N/A'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 652,\n                        columnNumber: 29\n                      }, this), fechamento.observacoes && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontSize: '0.75rem',\n                          color: '#6b7280'\n                        },\n                        children: fechamento.observacoes\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 654,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 651,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 650,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: (consultor === null || consultor === void 0 ? void 0 : consultor.nome) || 'N/A'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 660,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: (imobiliaria === null || imobiliaria === void 0 ? void 0 : imobiliaria.nome) || 'N/A'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 661,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: fechamento.tipo_servico && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"badge badge-info\",\n                      children: fechamento.tipo_servico\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 664,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 662,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      textAlign: 'right',\n                      fontWeight: '600'\n                    },\n                    children: formatarMoeda(fechamento.valor_fechado)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 669,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: isAdmin ? /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: fechamento.aprovado || 'pendente',\n                      onChange: e => alterarStatusAprovacao(fechamento.id, e.target.value),\n                      className: \"form-select\",\n                      style: {\n                        minWidth: '120px'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"pendente\",\n                        children: \"Pendente\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 681,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"aprovado\",\n                        children: \"Aprovado\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 682,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"reprovado\",\n                        children: \"Reprovado\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 683,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 675,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `badge ${fechamento.aprovado === 'aprovado' ? 'badge-success' : fechamento.aprovado === 'reprovado' ? 'badge-danger' : 'badge-warning'}`,\n                      children: fechamento.aprovado === 'aprovado' ? 'Aprovado' : fechamento.aprovado === 'reprovado' ? 'Reprovado' : 'Pendente'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 686,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 672,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        gap: '0.5rem',\n                        justifyContent: 'flex-end'\n                      },\n                      children: [fechamento.contrato_arquivo && /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => downloadContrato(fechamento),\n                        className: \"btn btn-sm btn-success\",\n                        title: `Baixar contrato: ${fechamento.contrato_nome_original || 'contrato.pdf'}`,\n                        style: {\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '4px'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                          width: \"16\",\n                          height: \"16\",\n                          viewBox: \"0 0 24 24\",\n                          fill: \"none\",\n                          stroke: \"currentColor\",\n                          strokeWidth: \"2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 707,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                            points: \"7 10 12 15 17 10\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 708,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                            x1: \"12\",\n                            y1: \"15\",\n                            x2: \"12\",\n                            y2: \"3\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 709,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 706,\n                          columnNumber: 33\n                        }, this), \"PDF\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 700,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-sm btn-secondary\",\n                        onClick: () => abrirModal(fechamento),\n                        title: \"Editar fechamento\",\n                        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                          width: \"16\",\n                          height: \"16\",\n                          viewBox: \"0 0 24 24\",\n                          fill: \"none\",\n                          stroke: \"currentColor\",\n                          strokeWidth: \"2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 720,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 721,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 719,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 714,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-sm btn-danger\",\n                        onClick: () => excluirFechamento(fechamento.id),\n                        title: \"Excluir fechamento\",\n                        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                          width: \"16\",\n                          height: \"16\",\n                          viewBox: \"0 0 24 24\",\n                          fill: \"none\",\n                          stroke: \"currentColor\",\n                          strokeWidth: \"2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"polyline\", {\n                            points: \"3 6 5 6 21 6\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 730,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 731,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 729,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 724,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 698,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 697,\n                    columnNumber: 25\n                  }, this)]\n                }, fechamento.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 648,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this), modalAberto && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"modal-title\",\n            children: fechamentoEditando ? 'Editar Fechamento' : 'Novo Fechamento'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: fecharModal,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 754,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            salvarFechamento();\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Cliente *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              value: novoFechamento.cliente_id,\n              onChange: e => handleClienteChange(e.target.value),\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Selecione um cliente\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 19\n              }, this), clientes.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: p.id,\n                children: [p.nome, \" \", p.telefone && `- ${p.telefone}`]\n              }, p.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 770,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Valor (R$) *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-input\",\n                value: novoFechamento.valor_formatado,\n                onChange: handleValorChange,\n                placeholder: \"0,00\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Corretor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: novoFechamento.consultor_id,\n                onChange: e => setNovoFechamento({\n                  ...novoFechamento,\n                  consultor_id: e.target.value\n                }),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Selecione um corretor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 797,\n                  columnNumber: 17\n                }, this), consultores.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c.id,\n                  children: c.nome\n                }, c.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 799,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 792,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 777,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Imobili\\xE1ria\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 806,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              value: novoFechamento.imobiliaria_id,\n              onChange: e => setNovoFechamento({\n                ...novoFechamento,\n                imobiliaria_id: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Selecione uma cl\\xEDnica\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 812,\n                columnNumber: 19\n              }, this), imobiliarias.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c.id,\n                children: c.nome\n              }, c.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 814,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 807,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 805,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Data do Fechamento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 821,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                className: \"form-input\",\n                value: novoFechamento.data_fechamento,\n                onChange: e => setNovoFechamento({\n                  ...novoFechamento,\n                  data_fechamento: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 822,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 820,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Tipo de Servi\\xE7o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 831,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: novoFechamento.tipo_servico,\n                onChange: e => setNovoFechamento({\n                  ...novoFechamento,\n                  tipo_servico: e.target.value\n                }),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Selecione\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 837,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Compra\",\n                  children: \"Compra\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 838,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Venda\",\n                  children: \"Venda\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 839,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 832,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 819,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: [\"Contrato (PDF) \", fechamentoEditando ? '(opcional)' : '*']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 845,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              className: \"form-input\",\n              accept: \".pdf\",\n              onChange: e => setContratoSelecionado(e.target.files[0])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 17\n            }, this), fechamentoEditando && fechamentoEditando.contrato_arquivo && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#6b7280',\n                marginTop: '0.5rem'\n              },\n              children: [\"Contrato atual: \", fechamentoEditando.contrato_nome_original || fechamentoEditando.contrato_arquivo]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 844,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Observa\\xE7\\xF5es\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"form-textarea\",\n              rows: \"3\",\n              value: novoFechamento.observacoes,\n              onChange: e => setNovoFechamento({\n                ...novoFechamento,\n                observacoes: e.target.value\n              }),\n              placeholder: \"Informa\\xE7\\xF5es adicionais...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 861,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              justifyContent: 'flex-end'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary\",\n              onClick: fecharModal,\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 871,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: salvando,\n              children: [salvando ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"loading-spinner\",\n                style: {\n                  display: 'inline-block',\n                  verticalAlign: 'middle',\n                  marginRight: 8\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 884,\n                columnNumber: 21\n              }, this) : null, fechamentoEditando ? salvando ? 'Atualizando...' : 'Atualizar' : salvando ? 'Salvando...' : 'Salvar']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 878,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 749,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 748,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 479,\n    columnNumber: 5\n  }, this);\n};\n_s(Fechamentos, \"aF4kot82OdD49ltAeqZrjB4xLIA=\", false, function () {\n  return [useAuth];\n});\n_c = Fechamentos;\nexport default Fechamentos;\nvar _c;\n$RefreshReg$(_c, \"Fechamentos\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","jsxDEV","_jsxDEV","Fechamentos","_s","makeRequest","isAdmin","fechamentos","setFechamentos","clientes","setClientes","consultores","setConsultores","imobiliarias","setClinicas","agendamentos","setAgendamentos","erro","setErro","carregando","setCarregando","filtroConsultor","setFiltroConsultor","filtroClinica","setFiltroClinica","filtroMes","setFiltroMes","filtrosVisiveis","setFiltrosVisiveis","modalAberto","setModalAberto","fechamentoEditando","setFechamentoEditando","ordenacao","setOrdenacao","novoFechamento","setNovoFechamento","cliente_id","consultor_id","imobiliaria_id","valor_fechado","valor_formatado","data_fechamento","Date","toISOString","split","tipo_servico","observacoes","contratoSelecionado","setContratoSelecionado","salvando","setSalvando","carregarDados","fechamentosRes","clientesRes","consultoresRes","imobiliariasRes","agendamentosRes","Promise","all","ok","Error","status","fechamentosData","json","clientesData","consultoresData","imobiliariasData","agendamentosData","Array","isArray","error","console","message","filtrarFechamentos","filter","fechamento","consultorMatch","parseInt","imobiliariaMatch","mesMatch","dataFechamento","ano","mes","getFullYear","getMonth","ordenarFechamentos","fechamentosFiltrados","fechamentosOrdenados","sort","a","b","parseFloat","_clientes$find","_clientes$find2","clienteA","find","c","id","nome","clienteB","localeCompare","calcularEstatisticas","fechamentosAprovados","f","aprovado","total","length","valorTotal","reduce","acc","ticketMedio","hoje","fechamentosHoje","mesAtual","fechamentosMes","contarFiltrosAtivos","count","limparFiltros","abrirModal","valorFormatado","toLocaleString","minimumFractionDigits","maximumFractionDigits","fecharModal","salvarFechamento","token","localStorage","getItem","trim","alert","window","location","href","type","size","formData","FormData","append","API_BASE_URL","process","env","NODE_ENV","url","log","response","fetch","method","headers","body","result","contrato","excluirFechamento","confirm","data","alterarStatusAprovacao","fechamentoId","novoStatus","endpoint","formatarMoeda","valor","Intl","NumberFormat","style","currency","format","formatarData","toLocaleDateString","formatarValorInput","numeros","replace","numero","desformatarValor","handleValorChange","e","valorDigitado","target","value","valorNumerico","handleClienteChange","clienteId","cliente","p","prev","toString","ultimoAgendamento","data_agendamento","downloadContrato","blob","URL","createObjectURL","document","createElement","download","contrato_nome_original","appendChild","click","revokeObjectURL","removeChild","className","children","fileName","_jsxFileName","lineNumber","columnNumber","padding","margin","fontSize","onClick","stats","filtrosAtivos","marginBottom","display","justifyContent","alignItems","color","marginTop","gap","width","height","viewBox","fill","stroke","strokeWidth","points","x1","y1","x2","y2","backgroundColor","borderBottom","onChange","map","textAlign","consultor","imobiliaria","fontWeight","minWidth","contrato_arquivo","title","d","onSubmit","preventDefault","required","telefone","placeholder","accept","files","rows","disabled","verticalAlign","marginRight","_c","$RefreshReg$"],"sources":["C:/Users/bruno/Downloads/CrmConstrutora/frontend/src/components/Fechamentos.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst Fechamentos = () => {\n  const { makeRequest, isAdmin } = useAuth();\n  const [fechamentos, setFechamentos] = useState([]);\n  const [clientes, setClientes] = useState([]);\n  const [consultores, setConsultores] = useState([]);\n  const [imobiliarias, setClinicas] = useState([]);\n  const [agendamentos, setAgendamentos] = useState([]);\n  const [erro, setErro] = useState(null);\n  const [carregando, setCarregando] = useState(true);\n  const [filtroConsultor, setFiltroConsultor] = useState('');\n  const [filtroClinica, setFiltroClinica] = useState('');\n  const [filtroMes, setFiltroMes] = useState('');\n  const [filtrosVisiveis, setFiltrosVisiveis] = useState(false);\n  const [modalAberto, setModalAberto] = useState(false);\n  const [fechamentoEditando, setFechamentoEditando] = useState(null);\n  const [ordenacao, setOrdenacao] = useState('data-desc'); // Novo estado para ordenação\n  const [novoFechamento, setNovoFechamento] = useState({\n    cliente_id: '',\n    consultor_id: '',\n    imobiliaria_id: '',\n    valor_fechado: '',\n    valor_formatado: '',\n    data_fechamento: new Date().toISOString().split('T')[0],\n    tipo_servico: '',\n    observacoes: ''\n  });\n  const [contratoSelecionado, setContratoSelecionado] = useState(null);\n  const [salvando, setSalvando] = useState(false);\n\n  useEffect(() => {\n    carregarDados();\n  }, []);\n\n  const carregarDados = async () => {\n    try {\n      setCarregando(true);\n      setErro(null);\n      \n      const [fechamentosRes, clientesRes, consultoresRes, imobiliariasRes, agendamentosRes] = await Promise.all([\n        makeRequest('/fechamentos'),\n        makeRequest('/clientes'),\n        makeRequest('/consultores'),\n        makeRequest('/imobiliarias'),\n        makeRequest('/agendamentos')\n      ]);\n\n      if (!fechamentosRes.ok) {\n        throw new Error(`Erro ao carregar fechamentos: ${fechamentosRes.status} - Tabela 'fechamentos' não encontrada. Execute a migração no Supabase.`);\n      }\n\n      const fechamentosData = await fechamentosRes.json();\n      const clientesData = await clientesRes.json();\n      const consultoresData = await consultoresRes.json();\n      const imobiliariasData = await imobiliariasRes.json();\n      const agendamentosData = await agendamentosRes.json();\n\n      setFechamentos(Array.isArray(fechamentosData) ? fechamentosData : []);\n      setClientes(Array.isArray(clientesData) ? clientesData : []);\n      setConsultores(Array.isArray(consultoresData) ? consultoresData : []);\n      setClinicas(Array.isArray(imobiliariasData) ? imobiliariasData : []);\n      setAgendamentos(Array.isArray(agendamentosData) ? agendamentosData : []);\n      \n      setCarregando(false);\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n      setErro(error.message);\n      setCarregando(false);\n      \n      setFechamentos([]);\n      setClientes([]);\n      setConsultores([]);\n      setClinicas([]);\n      setAgendamentos([]);\n    }\n  };\n\n  const filtrarFechamentos = () => {\n    if (!Array.isArray(fechamentos)) {\n      return [];\n    }\n    return fechamentos.filter(fechamento => {\n      const consultorMatch = !filtroConsultor || fechamento.consultor_id === parseInt(filtroConsultor);\n      const imobiliariaMatch = !filtroClinica || fechamento.imobiliaria_id === parseInt(filtroClinica);\n      \n      let mesMatch = true;\n      if (filtroMes) {\n        const dataFechamento = new Date(fechamento.data_fechamento);\n        const [ano, mes] = filtroMes.split('-');\n        mesMatch = dataFechamento.getFullYear() === parseInt(ano) && \n                   dataFechamento.getMonth() === parseInt(mes) - 1;\n      }\n\n      return consultorMatch && imobiliariaMatch && mesMatch;\n    });\n  };\n\n  const ordenarFechamentos = (fechamentosFiltrados) => {\n    const fechamentosOrdenados = [...fechamentosFiltrados];\n    \n    switch (ordenacao) {\n      case 'credito-desc':\n        return fechamentosOrdenados.sort((a, b) => parseFloat(b.valor_fechado || 0) - parseFloat(a.valor_fechado || 0));\n      case 'credito-asc':\n        return fechamentosOrdenados.sort((a, b) => parseFloat(a.valor_fechado || 0) - parseFloat(b.valor_fechado || 0));\n      case 'data-desc':\n        return fechamentosOrdenados.sort((a, b) => new Date(b.data_fechamento) - new Date(a.data_fechamento));\n      case 'data-asc':\n        return fechamentosOrdenados.sort((a, b) => new Date(a.data_fechamento) - new Date(b.data_fechamento));\n      case 'cliente':\n        return fechamentosOrdenados.sort((a, b) => {\n          const clienteA = clientes.find(c => c.id === a.cliente_id)?.nome || '';\n          const clienteB = clientes.find(c => c.id === b.cliente_id)?.nome || '';\n          return clienteA.localeCompare(clienteB);\n        });\n      default:\n        return fechamentosOrdenados;\n    }\n  };\n\n  const calcularEstatisticas = () => {\n    const fechamentosFiltrados = filtrarFechamentos();\n    // Considerar apenas fechamentos aprovados para estatísticas\n    const fechamentosAprovados = fechamentosFiltrados.filter(f => f.aprovado === 'aprovado');\n    \n    const total = fechamentosAprovados.length;\n    const valorTotal = fechamentosAprovados.reduce((acc, f) => acc + parseFloat(f.valor_fechado || 0), 0);\n    const ticketMedio = total > 0 ? valorTotal / total : 0;\n    \n    const hoje = new Date().toISOString().split('T')[0];\n    const fechamentosHoje = fechamentosAprovados.filter(f => f.data_fechamento === hoje).length;\n\n    const mesAtual = new Date();\n    const fechamentosMes = fechamentosAprovados.filter(f => {\n      const dataFechamento = new Date(f.data_fechamento);\n      return dataFechamento.getMonth() === mesAtual.getMonth() && \n             dataFechamento.getFullYear() === mesAtual.getFullYear();\n    }).length;\n\n    return { total, valorTotal, ticketMedio, fechamentosHoje, fechamentosMes };\n  };\n\n  const contarFiltrosAtivos = () => {\n    let count = 0;\n    if (filtroConsultor) count++;\n    if (filtroClinica) count++;\n    if (filtroMes) count++;\n    return count;\n  };\n\n  const limparFiltros = () => {\n    setFiltroConsultor('');\n    setFiltroClinica('');\n    setFiltroMes('');\n  };\n\n  const abrirModal = (fechamento = null) => {\n    if (fechamento) {\n      setFechamentoEditando(fechamento);\n      const valorFormatado = fechamento.valor_fechado \n        ? parseFloat(fechamento.valor_fechado).toLocaleString('pt-BR', {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n          })\n        : '';\n      \n      setNovoFechamento({ \n        ...fechamento, \n        valor_formatado: valorFormatado \n      });\n    } else {\n      setFechamentoEditando(null);\n      setNovoFechamento({\n        cliente_id: '',\n        consultor_id: '',\n        imobiliaria_id: '',\n        valor_fechado: '',\n        valor_formatado: '',\n        data_fechamento: new Date().toISOString().split('T')[0],\n        tipo_servico: '',\n        observacoes: ''\n      });\n    }\n    setModalAberto(true);\n  };\n\n  const fecharModal = () => {\n    setModalAberto(false);\n    setFechamentoEditando(null);\n    setContratoSelecionado(null);\n    setNovoFechamento({\n      cliente_id: '',\n      consultor_id: '',\n      imobiliaria_id: '',\n      valor_fechado: '',\n      valor_formatado: '',\n      data_fechamento: new Date().toISOString().split('T')[0],\n      tipo_servico: '',\n      observacoes: ''\n    });\n  };\n\n  const salvarFechamento = async () => {\n    setSalvando(true);\n    try {\n      const token = localStorage.getItem('token');\n      if (!token || token === 'null' || token.trim() === '') {\n        alert('Sua sessão expirou. Faça login novamente.');\n        window.location.href = '/login';\n        return;\n      }\n\n      if (!novoFechamento.cliente_id) {\n        alert('Por favor, selecione um cliente!');\n        return;\n      }\n      \n      if (!novoFechamento.valor_fechado || parseFloat(novoFechamento.valor_fechado) <= 0) {\n        alert('Por favor, informe um valor válido!');\n        return;\n      }\n\n      if (!fechamentoEditando && !contratoSelecionado) {\n        alert('Por favor, selecione o contrato em PDF!');\n        return;\n      }\n\n      if (contratoSelecionado && contratoSelecionado.type !== 'application/pdf') {\n        alert('Apenas arquivos PDF são permitidos para o contrato!');\n        return;\n      }\n\n      if (contratoSelecionado && contratoSelecionado.size > 10 * 1024 * 1024) {\n        alert('O arquivo deve ter no máximo 10MB!');\n        return;\n      }\n\n      const formData = new FormData();\n      \n      formData.append('cliente_id', parseInt(novoFechamento.cliente_id));\n      \n      if (novoFechamento.consultor_id && novoFechamento.consultor_id.trim() !== '') {\n        formData.append('consultor_id', parseInt(novoFechamento.consultor_id));\n      }\n      \n      if (novoFechamento.imobiliaria_id && novoFechamento.imobiliaria_id.trim() !== '') {\n        formData.append('imobiliaria_id', parseInt(novoFechamento.imobiliaria_id));\n      }\n      \n      formData.append('valor_fechado', parseFloat(novoFechamento.valor_fechado));\n      formData.append('data_fechamento', novoFechamento.data_fechamento);\n      formData.append('tipo_servico', novoFechamento.tipo_servico || '');\n      formData.append('observacoes', novoFechamento.observacoes || '');\n      \n      if (contratoSelecionado) {\n        formData.append('contrato', contratoSelecionado);\n      }\n\n      // Corrigir base da URL para evitar /api/api/fechamentos\n      const API_BASE_URL = process.env.NODE_ENV === 'production' ? '/api' : 'http://localhost:5000/api';\n      \n      const url = fechamentoEditando \n        ? `${API_BASE_URL}/fechamentos/${fechamentoEditando.id}`\n        : `${API_BASE_URL}/fechamentos`;\n      \n      console.log('🔐 Enviando requisição com token:', token ? 'presente' : 'ausente');\n      \n      const response = await fetch(url, {\n        method: fechamentoEditando ? 'PUT' : 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n          // NÃO incluir 'Content-Type' ao usar FormData\n        },\n        body: formData\n      });\n\n      const result = await response.json();\n\n      if (response.ok) {\n        carregarDados();\n        fecharModal();\n        alert(fechamentoEditando ? 'Fechamento atualizado!' : `Fechamento registrado com sucesso! Contrato: ${result.contrato || 'anexado'}`);\n      } else {\n        console.error('Erro na resposta:', result);\n        alert('Erro: ' + (result.error || 'Erro desconhecido'));\n      }\n    } catch (error) {\n      console.error('Erro ao salvar fechamento:', error);\n      alert('Erro ao salvar: ' + error.message);\n    } finally {\n      setSalvando(false);\n    }\n  };\n\n  const excluirFechamento = async (id) => {\n    if (window.confirm('Deseja excluir este fechamento?')) {\n      try {\n        const response = await makeRequest(`/fechamentos/${id}`, {\n          method: 'DELETE'\n        });\n\n        if (response.ok) {\n          carregarDados();\n          alert('Fechamento excluído!');\n        } else {\n          const data = await response.json();\n          alert('Erro ao excluir: ' + (data.error || 'Erro desconhecido'));\n        }\n      } catch (error) {\n        console.error('Erro ao excluir fechamento:', error);\n        alert('Erro ao excluir: ' + error.message);\n      }\n    }\n  };\n\n  // Função para alterar status de aprovação\n  const alterarStatusAprovacao = async (fechamentoId, novoStatus) => {\n    try {\n      console.log(`Alterando status do fechamento ${fechamentoId} para ${novoStatus}`);\n      \n      const endpoint = novoStatus === 'aprovado' ? 'aprovar' : 'reprovar';\n      const response = await makeRequest(`/fechamentos/${fechamentoId}/${endpoint}`, { \n        method: 'PUT' \n      });\n      \n      console.log('Resposta da API:', response.status);\n      \n      if (response.ok) {\n        const result = await response.json();\n        console.log('Sucesso:', result);\n        carregarDados();\n        alert(`Fechamento ${novoStatus === 'aprovado' ? 'aprovado' : 'reprovado'} com sucesso!`);\n      } else {\n        const error = await response.json();\n        console.error('Erro da API:', error);\n        alert('Erro ao alterar status: ' + (error.error || 'Erro desconhecido'));\n      }\n    } catch (error) {\n      console.error('Erro na requisição:', error);\n      alert('Erro de conexão: ' + error.message);\n    }\n  };\n\n  const formatarMoeda = (valor) => {\n    return new Intl.NumberFormat('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    }).format(valor);\n  };\n\n  const formatarData = (data) => {\n    return new Date(data + 'T00:00:00').toLocaleDateString('pt-BR');\n  };\n\n  const formatarValorInput = (valor) => {\n    const numeros = valor.replace(/\\D/g, '');\n    if (!numeros) return '';\n    const numero = parseFloat(numeros) / 100;\n    return numero.toLocaleString('pt-BR', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    });\n  };\n\n  const desformatarValor = (valorFormatado) => {\n    if (!valorFormatado) return '';\n    return valorFormatado.replace(/\\./g, '').replace(',', '.');\n  };\n\n  const handleValorChange = (e) => {\n    const valorDigitado = e.target.value;\n    const valorFormatado = formatarValorInput(valorDigitado);\n    const valorNumerico = desformatarValor(valorFormatado);\n    \n    setNovoFechamento({\n      ...novoFechamento, \n      valor_fechado: valorNumerico,\n      valor_formatado: valorFormatado\n    });\n  };\n\n  const handleClienteChange = async (clienteId) => {\n    setNovoFechamento({...novoFechamento, cliente_id: clienteId});\n    \n    if (clienteId) {\n      // Buscar o cliente selecionado\n      const cliente = clientes.find(p => p.id === parseInt(clienteId));\n      \n      if (cliente && cliente.consultor_id) {\n        // Se o cliente tem consultor, selecionar automaticamente\n        setNovoFechamento(prev => ({\n          ...prev,\n          cliente_id: clienteId,\n          consultor_id: cliente.consultor_id.toString()\n        }));\n      }\n      \n              // Buscar última visita do cliente para pegar a clínica\n        const ultimoAgendamento = agendamentos\n        .filter(a => a.cliente_id === parseInt(clienteId))\n        .sort((a, b) => new Date(b.data_agendamento) - new Date(a.data_agendamento))[0];\n      \n      if (ultimoAgendamento && ultimoAgendamento.imobiliaria_id) {\n        setNovoFechamento(prev => ({\n          ...prev,\n          imobiliaria_id: ultimoAgendamento.imobiliaria_id.toString()\n        }));\n      }\n    }\n  };\n\n  const downloadContrato = async (fechamento) => {\n    try {\n      const API_BASE_URL = process.env.NODE_ENV === 'production' ? '' : 'http://localhost:5000/api';\n      \n      const token = localStorage.getItem('token');\n      if (!token || token === 'null' || token.trim() === '') {\n        alert('Sua sessão expirou. Faça login novamente.');\n        window.location.href = '/login';\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/api/fechamentos/${fechamento.id}/contrato`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        alert('Erro ao baixar contrato: ' + (data.error || 'Erro desconhecido'));\n        return;\n      }\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = fechamento.contrato_nome_original || 'contrato.pdf';\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    } catch (error) {\n      console.error('Erro ao baixar contrato:', error);\n      alert('Erro ao baixar contrato: ' + error.message);\n    }\n  };\n\n  if (carregando) {\n    return (\n      <div className=\"loading\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  }\n\n  if (erro) {\n    return (\n      <div style={{ padding: '2rem' }}>\n        <div className=\"alert alert-error\">\n          <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.125rem' }}>Erro ao carregar dados</h3>\n          <p style={{ margin: '0 0 1rem 0' }}>{erro}</p>\n          <button className=\"btn btn-primary\" onClick={carregarDados}>\n            Tentar Novamente\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const fechamentosFiltrados = ordenarFechamentos(filtrarFechamentos());\n  const stats = calcularEstatisticas();\n  const filtrosAtivos = contarFiltrosAtivos();\n\n  return (\n    <div>\n      <div className=\"page-header\">\n        <h1 className=\"page-title\">Gerenciar Fechamentos</h1>\n        <p className=\"page-subtitle\">Gerencie os fechamentos de vendas</p>\n      </div>\n\n      {/* KPIs */}\n      <div className=\"stats-grid\" style={{ marginBottom: '2rem' }}>\n        <div className=\"stat-card\">\n          <div className=\"stat-label\">Total de Indicações</div>\n          <div className=\"stat-value\">{stats.total}</div>\n        </div>\n        \n        <div className=\"stat-card\">\n          <div className=\"stat-label\">Crédito Acumulado</div>\n          <div className=\"stat-value\">{formatarMoeda(stats.valorTotal)}</div>\n        </div>\n        \n        <div className=\"stat-card\">\n          <div className=\"stat-label\">Ticket Médio</div>\n          <div className=\"stat-value\">{formatarMoeda(stats.ticketMedio)}</div>\n        </div>\n        \n        <div className=\"stat-card\">\n          <div className=\"stat-label\">Indicações Hoje</div>\n          <div className=\"stat-value\">{stats.fechamentosHoje}</div>\n        </div>\n        \n        <div className=\"stat-card\">\n          <div className=\"stat-label\">Indicações no Mês</div>\n          <div className=\"stat-value\">{stats.fechamentosMes}</div>\n        </div>\n      </div>\n\n      {/* Filtros e Ações */}\n      <div className=\"card\">\n        <div className=\"card-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <div>\n            <h2 className=\"card-title\">Lista de Fechamentos</h2>\n            <div style={{ fontSize: '0.875rem', color: '#6b7280', marginTop: '0.25rem' }}>\n              Classificado por: {\n                ordenacao === 'data-desc' ? 'Data (Mais recente)' :\n                ordenacao === 'data-asc' ? 'Data (Mais antigo)' :\n                ordenacao === 'credito-desc' ? 'Crédito Acumulado (Maior)' :\n                ordenacao === 'credito-asc' ? 'Crédito Acumulado (Menor)' :\n                ordenacao === 'cliente' ? 'Cliente (A-Z)' : 'Padrão'\n              }\n            </div>\n          </div>\n          <div style={{ display: 'flex', gap: '1rem' }}>\n            <button \n              className=\"btn btn-secondary\"\n              onClick={() => setFiltrosVisiveis(!filtrosVisiveis)}\n            >\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\"></polygon>\n              </svg>\n              Filtros {filtrosAtivos > 0 && `(${filtrosAtivos})`}\n            </button>\n            <button className=\"btn btn-primary\" onClick={() => abrirModal()}>\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n              </svg>\n              Novo Fechamento\n            </button>\n          </div>\n        </div>\n\n        {/* Filtros */}\n        {filtrosVisiveis && (\n          <div style={{ \n            padding: '1.5rem', \n            backgroundColor: '#f9fafb',\n            borderBottom: '1px solid #e5e7eb'\n          }}>\n            <div className=\"grid grid-4\" style={{ gap: '1rem', marginBottom: '1rem' }}>\n              <div className=\"form-group\" style={{ margin: 0 }}>\n                <label className=\"form-label\">Corretor</label>\n                <select \n                  className=\"form-select\"\n                  value={filtroConsultor} \n                  onChange={(e) => setFiltroConsultor(e.target.value)}\n                >\n                  <option value=\"\">Todos</option>\n                  {consultores.map(c => (\n                    <option key={c.id} value={c.id}>{c.nome}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"form-group\" style={{ margin: 0 }}>\n                <label className=\"form-label\">Imobiliária</label>\n                <select \n                  className=\"form-select\"\n                  value={filtroClinica} \n                  onChange={(e) => setFiltroClinica(e.target.value)}\n                >\n                  <option value=\"\">Todas</option>\n                  {imobiliarias.map(c => (\n                    <option key={c.id} value={c.id}>{c.nome}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"form-group\" style={{ margin: 0 }}>\n                <label className=\"form-label\">Mês</label>\n                <input \n                  type=\"month\" \n                  className=\"form-input\"\n                  value={filtroMes} \n                  onChange={(e) => setFiltroMes(e.target.value)}\n                />\n              </div>\n\n              <div className=\"form-group\" style={{ margin: 0 }}>\n                <label className=\"form-label\">Classificar por</label>\n                <select \n                  className=\"form-select\"\n                  value={ordenacao} \n                  onChange={(e) => setOrdenacao(e.target.value)}\n                >\n                  <option value=\"data-desc\">Data (Mais recente)</option>\n                  <option value=\"data-asc\">Data (Mais antigo)</option>\n                  <option value=\"credito-desc\">Crédito Acumulado (Maior)</option>\n                  <option value=\"credito-asc\">Crédito Acumulado (Menor)</option>\n                  <option value=\"cliente\">Cliente (A-Z)</option>\n                </select>\n              </div>\n            </div>\n            \n            {filtrosAtivos > 0 && (\n              <button \n                className=\"btn btn-sm btn-secondary\"\n                onClick={limparFiltros}\n              >\n                Limpar Filtros\n              </button>\n            )}\n          </div>\n        )}\n\n        <div className=\"card-body\">\n          {fechamentosFiltrados.length === 0 ? (\n            <div style={{ textAlign: 'center', padding: '3rem', color: '#6b7280' }}>\n              Nenhum fechamento encontrado\n            </div>\n          ) : (\n            <div className=\"table-container\">\n              <table className=\"table\">\n                <thead>\n                  <tr>\n                    <th>Data</th>\n                    <th>Cliente</th>\n                    <th>Corretor</th>\n                    <th>Imobiliária</th>\n                    <th>Tipo</th>\n                    <th style={{ textAlign: 'right' }}>Valor</th>\n                    <th>Status</th>\n                    <th style={{ width: '180px' }}>Ações</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {fechamentosFiltrados.map(fechamento => {\n                    const cliente = clientes.find(p => p.id === fechamento.cliente_id);\n                    const consultor = consultores.find(c => c.id === fechamento.consultor_id);\n                    const imobiliaria = imobiliarias.find(c => c.id === fechamento.imobiliaria_id);\n\n                    return (\n                      <tr key={fechamento.id}>\n                        <td>{formatarData(fechamento.data_fechamento)}</td>\n                        <td>\n                          <div>\n                            <div style={{ fontWeight: '500' }}>{cliente?.nome || 'N/A'}</div>\n                            {fechamento.observacoes && (\n                              <div style={{ fontSize: '0.75rem', color: '#6b7280' }}>\n                                {fechamento.observacoes}\n                              </div>\n                            )}\n                          </div>\n                        </td>\n                        <td>{consultor?.nome || 'N/A'}</td>\n                        <td>{imobiliaria?.nome || 'N/A'}</td>\n                        <td>\n                          {fechamento.tipo_servico && (\n                            <span className=\"badge badge-info\">\n                              {fechamento.tipo_servico}\n                            </span>\n                          )}\n                        </td>\n                        <td style={{ textAlign: 'right', fontWeight: '600' }}>\n                          {formatarMoeda(fechamento.valor_fechado)}\n                        </td>\n                        <td>\n                          {/* Campo select para alterar status (apenas admin) */}\n                          {isAdmin ? (\n                            <select \n                              value={fechamento.aprovado || 'pendente'} \n                              onChange={(e) => alterarStatusAprovacao(fechamento.id, e.target.value)}\n                              className=\"form-select\"\n                              style={{ minWidth: '120px' }}\n                            >\n                              <option value=\"pendente\">Pendente</option>\n                              <option value=\"aprovado\">Aprovado</option>\n                              <option value=\"reprovado\">Reprovado</option>\n                            </select>\n                          ) : (\n                            <span className={`badge ${\n                              fechamento.aprovado === 'aprovado' ? 'badge-success' : \n                              fechamento.aprovado === 'reprovado' ? 'badge-danger' : \n                              'badge-warning'\n                            }`}>\n                              {fechamento.aprovado === 'aprovado' ? 'Aprovado' : \n                               fechamento.aprovado === 'reprovado' ? 'Reprovado' : \n                               'Pendente'}\n                            </span>\n                          )}\n                        </td>\n                        <td>\n                          <div style={{ display: 'flex', gap: '0.5rem', justifyContent: 'flex-end' }}>\n                            {fechamento.contrato_arquivo && (\n                              <button \n                                onClick={() => downloadContrato(fechamento)}\n                                className=\"btn btn-sm btn-success\"\n                                title={`Baixar contrato: ${fechamento.contrato_nome_original || 'contrato.pdf'}`}\n                                style={{ display: 'flex', alignItems: 'center', gap: '4px' }}\n                              >\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n                                  <polyline points=\"7 10 12 15 17 10\"></polyline>\n                                  <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n                                </svg>\n                                PDF\n                              </button>\n                            )}\n                            <button \n                              className=\"btn btn-sm btn-secondary\"\n                              onClick={() => abrirModal(fechamento)}\n                              title=\"Editar fechamento\"\n                            >\n                              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\n                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\n                              </svg>\n                            </button>\n                            <button \n                              className=\"btn btn-sm btn-danger\"\n                              onClick={() => excluirFechamento(fechamento.id)}\n                              title=\"Excluir fechamento\"\n                            >\n                              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <polyline points=\"3 6 5 6 21 6\"></polyline>\n                                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\n                              </svg>\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modal */}\n      {modalAberto && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal\">\n            <div className=\"modal-header\">\n              <h2 className=\"modal-title\">\n                {fechamentoEditando ? 'Editar Fechamento' : 'Novo Fechamento'}\n              </h2>\n              <button className=\"close-btn\" onClick={fecharModal}>\n                ×\n              </button>\n            </div>\n\n            <form onSubmit={(e) => { e.preventDefault(); salvarFechamento(); }}>\n              <div className=\"form-group\">\n                <label className=\"form-label\">Cliente *</label>\n                <select \n                  className=\"form-select\"\n                  value={novoFechamento.cliente_id}\n                  onChange={(e) => handleClienteChange(e.target.value)}\n                  required\n                >\n                  <option value=\"\">Selecione um cliente</option>\n                  {clientes.map(p => (\n                    <option key={p.id} value={p.id}>\n                      {p.nome} {p.telefone && `- ${p.telefone}`}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"grid grid-2\">\n                <div className=\"form-group\">\n                  <label className=\"form-label\">Valor (R$) *</label>\n                  <input \n                    type=\"text\"\n                    className=\"form-input\"\n                    value={novoFechamento.valor_formatado}\n                    onChange={handleValorChange}\n                    placeholder=\"0,00\"\n                    required\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                                <label className=\"form-label\">Corretor</label>\n              <select \n                className=\"form-select\"\n                value={novoFechamento.consultor_id}\n                onChange={(e) => setNovoFechamento({...novoFechamento, consultor_id: e.target.value})}\n              >\n                <option value=\"\">Selecione um corretor</option>\n                    {consultores.map(c => (\n                      <option key={c.id} value={c.id}>{c.nome}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <label className=\"form-label\">Imobiliária</label>\n                <select \n                  className=\"form-select\"\n                  value={novoFechamento.imobiliaria_id}\n                  onChange={(e) => setNovoFechamento({...novoFechamento, imobiliaria_id: e.target.value})}\n                >\n                  <option value=\"\">Selecione uma clínica</option>\n                  {imobiliarias.map(c => (\n                    <option key={c.id} value={c.id}>{c.nome}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"grid grid-2\">\n                <div className=\"form-group\">\n                  <label className=\"form-label\">Data do Fechamento</label>\n                  <input \n                    type=\"date\"\n                    className=\"form-input\"\n                    value={novoFechamento.data_fechamento}\n                    onChange={(e) => setNovoFechamento({...novoFechamento, data_fechamento: e.target.value})}\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label className=\"form-label\">Tipo de Serviço</label>\n                  <select \n                    className=\"form-select\"\n                    value={novoFechamento.tipo_servico}\n                    onChange={(e) => setNovoFechamento({...novoFechamento, tipo_servico: e.target.value})}\n                  >\n                    <option value=\"\">Selecione</option>\n                    <option value=\"Compra\">Compra</option>\n                    <option value=\"Venda\">Venda</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <label className=\"form-label\">Contrato (PDF) {fechamentoEditando ? '(opcional)' : '*'}</label>\n                <input \n                  type=\"file\"\n                  className=\"form-input\"\n                  accept=\".pdf\"\n                  onChange={(e) => setContratoSelecionado(e.target.files[0])}\n                />\n                {fechamentoEditando && fechamentoEditando.contrato_arquivo && (\n                  <p style={{ fontSize: '0.875rem', color: '#6b7280', marginTop: '0.5rem' }}>\n                    Contrato atual: {fechamentoEditando.contrato_nome_original || fechamentoEditando.contrato_arquivo}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"form-group\">\n                <label className=\"form-label\">Observações</label>\n                <textarea \n                  className=\"form-textarea\"\n                  rows=\"3\"\n                  value={novoFechamento.observacoes}\n                  onChange={(e) => setNovoFechamento({...novoFechamento, observacoes: e.target.value})}\n                  placeholder=\"Informações adicionais...\"\n                />\n              </div>\n\n              <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\n                <button \n                  type=\"button\"\n                  className=\"btn btn-secondary\" \n                  onClick={fecharModal}\n                >\n                  Cancelar\n                </button>\n                <button \n                  type=\"submit\"\n                  className=\"btn btn-primary\"\n                  disabled={salvando}\n                >\n                  {salvando ? (\n                    <span className=\"loading-spinner\" style={{ display: 'inline-block', verticalAlign: 'middle', marginRight: 8 }}></span>\n                  ) : null}\n                  {fechamentoEditando ? (salvando ? 'Atualizando...' : 'Atualizar') : (salvando ? 'Salvando...' : 'Salvar')}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Fechamentos; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}